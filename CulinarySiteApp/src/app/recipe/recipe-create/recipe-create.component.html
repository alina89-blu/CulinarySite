<div class="Pad">
  <h3>Добавление нового рецепта</h3>
  <form [formGroup]="myForm" class="example-form">
    <!--  <div class="form-group">
      <label>Название</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="createRecipeModel.name"
        formControlName="name"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          myForm.controls['name'].invalid && myForm.controls['name'].touched
        "
      >
        Не указано название рецепта
      </div>
    </div>-->

    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Название</mat-label>
      <br />
      <input
        type="text"
        matInput
        formControlName="name"
        [(ngModel)]="createRecipeModel.name"
        placeholder="Название"
      />
      <mat-error *ngIf="myForm.controls['name'].hasError('required')">
        Не указано название книги</mat-error
      >
    </mat-form-field>

    <!--  <div class="form-group">
      <label>Количество порций</label>
      <input
        type="number"
        class="form-control"
        [(ngModel)]="createRecipeModel.servingsNumber"
        formControlName="servingsNumber"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          myForm.controls['servingsNumber'].invalid &&
          myForm.controls['servingsNumber'].touched
        "
      >
        Не указано количество порций
      </div>
    </div>-->

    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Количество порций</mat-label>
      <br />
      <input
        type="number"
        matInput
        formControlName="servingsNumber"
        [(ngModel)]="createRecipeModel.servingsNumber"
        placeholder="Количество порций"
      />
      <mat-error *ngIf="myForm.controls['servingsNumber'].hasError('required')">
        Не указано количество порций</mat-error
      >
    </mat-form-field>

    <!--    <div class="form-group">
      <label>Image</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="createRecipeModel.imageUrl"
        formControlName="imageUrl"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          myForm.controls['imageUrl'].invalid &&
          myForm.controls['imageUrl'].touched
        "
      >
        Не указан УРЛ картинки
      </div>
    </div>-->

    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>УРЛ картинки</mat-label>
      <br />
      <input
        type="text"
        matInput
        formControlName="imageUrl"
        [(ngModel)]="createRecipeModel.imageUrl"
        placeholder="УРЛ картинки"
      />
      <mat-error *ngIf="myForm.controls['imageUrl'].hasError('required')">
        Не указан УРЛ картинки</mat-error
      >
    </mat-form-field>

    <!--<div class="form-group">
      <label>Время готовки</label>
      <input
        type="time"
        class="form-control"
        [(ngModel)]="createRecipeModel.cookingTime"
        formControlName="cookingTime"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          myForm.controls['cookingTime'].invalid &&
          myForm.controls['cookingTime'].touched
        "
      >
        Не указано время готовки
      </div>
    </div>-->

    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Время готовки</mat-label>
      <br />
      <input
        type="time"
        matInput
        formControlName="cookingTime"
        [(ngModel)]="createRecipeModel.cookingTime"
        placeholder="Время готовки"
      />
      <mat-error *ngIf="myForm.controls['cookingTime'].hasError('required')">
        Не указано время готовки</mat-error
      >
    </mat-form-field>

    <!--     <div class="form-group">
      <label> Уровень сложности</label>
      <select
        [(ngModel)]="createRecipeModel.difficultyLevel"
        class="form-control"
        formControlName="difficultyLevel"
      >
        <option *ngFor="let difficultyLevel of difficultyLevels">
          {{ difficultyLevel }}
        </option>
      </select>
      <div
        class="alert alert-danger"
        *ngIf="
          myForm.controls['difficultyLevel'].invalid &&
          myForm.controls['difficultyLevel'].touched
        "
      >
        Не указан уровень сложности
      </div>
    </div>-->

    <mat-form-field appearance="fill">
      <mat-label>Уровень сложности</mat-label>
      <br />
      <mat-select
        formControlName="difficultyLevel"
        [(ngModel)]="createRecipeModel.difficultyLevel"
        placeholder="Уровень сложности"
      >
        <mat-option
          *ngFor="let difficultyLevel of difficultyLevels"
          [value]="difficultyLevel"
        >
          {{ difficultyLevel }}
        </mat-option>
      </mat-select>
      <mat-error
        *ngIf="myForm.controls['difficultyLevel'].hasError('required')"
      >
        Не указан уровень сложности
      </mat-error>
    </mat-form-field>

    <!--  <div class="form-group">
      <label>Содержание</label>
      <input
        type="text"
        [(ngModel)]="createRecipeModel.content"
        class="form-control"
        formControlName="content"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          myForm.controls['content'].invalid &&
          myForm.controls['content'].touched
        "
      >
        Не указано содержание
      </div>
    </div>-->

    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Содержание</mat-label>
      <br />
      <input
        type="text"
        matInput
        formControlName="content"
        [(ngModel)]="createRecipeModel.content"
        placeholder="Содержание"
      />
      <mat-error *ngIf="myForm.controls['content'].hasError('required')">
        Не указано содержание</mat-error
      >
    </mat-form-field>

    <!--   <div class="form-group">
      <label>Автор</label>
      <select
        [(ngModel)]="createRecipeModel.authorId"
        class="form-control"
        formControlName="authorId"
      >
        <option *ngFor="let author of authors" [ngValue]="author.authorId">
          {{ author.name }}
        </option>
      </select>
      <div
        class="alert alert-danger"
        *ngIf="
          myForm.controls['authorId'].invalid &&
          myForm.controls['authorId'].touched
        "
      >
        Не указано имя автора
      </div>
    </div>-->

    <mat-form-field appearance="fill">
      <mat-label>Автор</mat-label>
      <br />
      <mat-select
        formControlName="authorId"
        [(ngModel)]="createRecipeModel.authorId"
        placeholder="Автор"
      >
        <mat-option *ngFor="let author of authors" [value]="author.authorId">
          {{ author.name }}
        </mat-option>
      </mat-select>
      <mat-error
        *ngIf="myForm.controls['difficultyLevel'].hasError('required')"
      >
        Не указан автор книги
      </mat-error>
    </mat-form-field>

    <!--  <div class="form-group">
      <label>Название книги</label>
      <select
        [(ngModel)]="createRecipeModel.bookId"
        class="form-control"
        formControlName="bookId"
      >
        <option *ngFor="let book of books" [ngValue]="book.bookId">
          {{ book.name }}
        </option>
      </select>
      <div
        class="alert alert-danger"
        *ngIf="
          myForm.controls['bookId'].invalid && myForm.controls['bookId'].touched
        "
      >
        Не указано название книги
      </div>
    </div>-->

    <mat-form-field appearance="fill">
      <mat-label>Название книги</mat-label>
      <br />
      <mat-select
        formControlName="bookId"
        [(ngModel)]="createRecipeModel.bookId"
        placeholder="Название книги"
      >
        <mat-option *ngFor="let book of books" [value]="book.bookId">
          {{ book.name }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="myForm.controls['bookId'].hasError('required')">
        Не указано название книги
      </mat-error>
    </mat-form-field>

    <!--   <div class="form-group">
      <label>Категория блюда</label>
      <select
        [(ngModel)]="createRecipeModel.dishId"
        class="form-control"
        formControlName="dishId"
      >
        <option *ngFor="let dish of dishes" [ngValue]="dish.dishId">
          {{ dish.category }}
        </option>
      </select>
      <div
        class="alert alert-danger"
        *ngIf="
          myForm.controls['dishId'].invalid && myForm.controls['dishId'].touched
        "
      >
        Не указано категория блюда
      </div>
    </div>-->

    <mat-form-field appearance="fill">
      <mat-label>Категория блюда</mat-label>
      <br />
      <mat-select
        formControlName="dishId"
        [(ngModel)]="createRecipeModel.dishId"
        placeholder="Категория блюда"
      >
        <mat-option *ngFor="let dish of dishes" [value]="dish.dishId">
          {{ dish.category }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="myForm.controls['dishId'].hasError('required')">
        Не указано категория блюда
      </mat-error>
    </mat-form-field>

    <h3>Добавление ингредиентов</h3>
    <div
      formArrayName="ingredients"
      *ngFor="
        let ingredient of getIngredientsFormsControls()['controls'];
        let i = index
      "
    >
      <div [formGroupName]="i">
        <!--     <div class="form-group">
          <label>Название</label>
          <input
            class="form-control"
            type="text"
            [(ngModel)]="createRecipeModel.ingredients[i].name"
            name="name"
            formControlName="name"
          />
        </div>-->

        <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Название</mat-label>
          <br />
          <input
            type="text"
            matInput
            formControlName="name"
            [(ngModel)]="createRecipeModel.ingredients[i].name"
            placeholder="Название"
          />
          <!--     <mat-error *ngIf="myForm.controls['name'].hasError('required')">
            Не указано название книги</mat-error
          >-->
        </mat-form-field>

        <!--   <div class="form-group">
          <label>Единица измерения</label>
          <select
            [(ngModel)]="createRecipeModel.ingredients[i].unit"
            class="form-control"
            formControlName="unit"
          >
            <option></option>
            <option *ngFor="let unit of units">
              {{ unit }}
            </option>
          </select>
        </div>
-->

        <mat-form-field appearance="fill">
          <mat-label>Единица измерения</mat-label>
          <br />
          <mat-select
            formControlName="unit"
            [(ngModel)]="createRecipeModel.ingredients[i].unit"
            placeholder="Категория блюда"
          >
            <mat-option *ngFor="let unit of units" [value]="unit">
              {{ unit }}
            </mat-option>
          </mat-select>
          <!--    <mat-error *ngIf="myForm.controls['unit'].hasError('required')">
            Не указано категория блюда
          </mat-error>-->
        </mat-form-field>

        <!--    <div class="form-group">
          <label>Количество</label>
          <input
            type="number"
            class="form-control"
            min="0"
            [(ngModel)]="createRecipeModel.ingredients[i].quantity"
            formControlName="quantity"
          />
        </div>-->

        <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Количество</mat-label>
          <br />
          <input
            type="number"
            matInput
            formControlName="quantity"
            [(ngModel)]="createRecipeModel.ingredients[i].quantity"
            placeholder="Количество"
          />
          <!--   <mat-error *ngIf="myForm.controls['quantity'].hasError('required')">
            Не указано название книги</mat-error
          >-->
        </mat-form-field>

        <!--  <button (click)="deleteIngredient(i)">Удалить</button>-->
      </div>
    </div>

    <!---->
    <div class="form-group">
      <button mat-raised-button color="primary" (click)="addIngredient()">
        Добавить ингредиент
      </button>
    </div>

    <h3>Добавление органических материй</h3>
    <div
      formArrayName="organicMatters"
      *ngFor="
        let organicMatter of getOrganicMattersFormsControls()['controls'];
        let i = index
      "
    >
      <div [formGroupName]="i">
        <!--  <div class="form-group">
          <label>Название</label>
          <select
            [(ngModel)]="createRecipeModel.organicMatters[i].name"
            class="form-control"
            formControlName="name"
          >
            <option></option>
            <option *ngFor="let organicMatter of organicMatters">
              {{ organicMatter }}
            </option>
          </select>
        </div>
-->

        <mat-form-field appearance="fill">
          <mat-label>Название</mat-label>
          <br />
          <mat-select
            formControlName="name"
            [(ngModel)]="createRecipeModel.organicMatters[i].name"
            placeholder="Название"
          >
            <mat-option
              *ngFor="let organicMatter of organicMatters"
              [value]="organicMatter"
            >
              {{ organicMatter }}
            </mat-option>
          </mat-select>
          <!--    <mat-error *ngIf="myForm.controls['unit'].hasError('required')">
            Не указано категория блюда
          </mat-error>-->
        </mat-form-field>

        <!--     <div class="form-group">
          <label>Единица измерения</label>
          <select
            [(ngModel)]="createRecipeModel.organicMatters[i].unit"
            class="form-control"
            formControlName="unit"
          >
            <option></option>
            <option *ngFor="let unit of units">
              {{ unit }}
            </option>
          </select>
        </div>-->

        <mat-form-field appearance="fill">
          <mat-label>Единица измерения</mat-label>
          <br />
          <mat-select
            formControlName="unit"
            [(ngModel)]="createRecipeModel.organicMatters[i].unit"
            placeholder="Единица измерения"
          >
            <mat-option *ngFor="let unit of units" [value]="unit">
              {{ unit }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!--     <div class="form-group">
          <label>Количество</label>
          <input
            type="number"
            class="form-control"
            min="0"
            [(ngModel)]="createRecipeModel.organicMatters[i].quantity"
            formControlName="quantity"
          />
        </div>-->

        <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Количество</mat-label>
          <br />
          <input
            type="number"
            matInput
            formControlName="quantity"
            [(ngModel)]="createRecipeModel.organicMatters[i].quantity"
            placeholder="Количество"
          />
          <!--   <mat-error *ngIf="myForm.controls['quantity'].hasError('required')">
            Не указано название книги</mat-error
          >-->
        </mat-form-field>

        <!--  <button (click)="deleteOrganicMatter(i)">Удалить</button>-->
      </div>
    </div>

    <div class="form-group">
      <button mat-raised-button color="primary" (click)="addOrganicMatter()">
        Добавить органическую материю
      </button>
    </div>

    <!--  <div class="form-group">
      <button class="btn info" [disabled]="myForm.invalid">Отправить</button>
    </div>

    -->
  </form>

  <div class="example-button-row">
    <button
      mat-raised-button
      color="primary"
      [disabled]="myForm.invalid"
      (click)="createRecipe()"
    >
      Создать
    </button>
  </div>
</div>
